<div class="profile-container">
  <h1>Profil</h1>

  <div class="profile-card">
    <p>
      <strong>NÃ©v:</strong> {{ userData?.name }}
      @if (userData?.isAdmin) {
      <span class="admin-badge">[ADMIN]</span>
      }
    </p>
    <p><strong>Email:</strong> {{ userData?.email }}</p>
  </div>

  @if (userData?.isAdmin) {
  <div class="admin-messages">
    <h2>ğŸ“¬ BeÃ©rkezett Ã¼zenetek</h2>

    <div class="filter">
      <label for="category">ğŸ“‚ SzÅ±rÃ©s:</label>
      <select id="category" [(ngModel)]="selectedCategory" (change)="filterMessages()">
        <option value="">ğŸ“‘ Ã–sszes</option>
        <option value="Panasz">ğŸ˜  Panasz</option>
        <option value="Ã‰szrevÃ©tel">ğŸ’¡ Ã‰szrevÃ©tel</option>
        <option value="HibabejelentÃ©s">ğŸ HibabejelentÃ©s</option>
        <option value="TermÃ©k">ğŸ“¦ TermÃ©k</option>
      </select>
    </div>

    @if (filteredMessages.length === 0) {
    <p class="no-messages">âŒ Nincs megjelenÃ­thetÅ‘ Ã¼zenet.</p>
    }

    <ul class="message-list">
      @for (msg of filteredMessages; track msg.userId) {
      <li class="message-card">
        <p>ğŸ“‚ <strong>KategÃ³ria:</strong> {{ msg.category }}</p>
        <p>ğŸ‘¤ <strong>NÃ©v:</strong> {{ msg.name }}</p>
        <p>ğŸ“§ <strong>Email:</strong> {{ msg.email }}</p>
        <p>ğŸ—“ï¸ <strong>DÃ¡tum:</strong> {{ msg.sentDateConverted | hungarianDate }}</p>
        <p>ğŸ’¬ <strong>Ãœzenet:</strong><br />{{ msg.message }}</p>
      </li>
      }
    </ul>
  </div>

  }

  <div class="user-orders">
    <h2>ğŸ§¾ SajÃ¡t rendelÃ©sek</h2>

    <label for="sort">ğŸ“Š RendezÃ©s:</label>
    <select id="sort" [(ngModel)]="sortBy" (change)="changeSort(sortBy)">
      <option value="date">ğŸ•’ DÃ¡tum szerint</option>
      <option value="price">ğŸ’° Ã–sszeg szerint</option>
    </select>

    @if (orders.length === 0) {
    <p class="no-orders">ğŸ“­ MÃ©g nincs leadott rendelÃ©sed.</p>
    }

    <ul class="order-list">
      @for (order of orders; track order.id) {
      <li class="order-card">
        <p>ğŸ—“ï¸ <strong>DÃ¡tum:</strong> {{ order.createdAt | hungarianDate }}</p>
        <p>ğŸ“ <strong>CÃ­m:</strong> {{ order.address }}</p>
        <p>ğŸ“ <strong>Telefon:</strong> {{ order.phone }}</p>
        <p>ğŸ’¬ <strong>MegjegyzÃ©s:</strong> {{ order.comment || 'â€”' }}</p>
        <p>ğŸ’° <strong>Ã–sszeg:</strong> {{ order.totalPrice | number:'1.0-2' }} Ft</p>
      </li>
      }
    </ul>
  </div>

</div>